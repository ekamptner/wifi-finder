function getIcon(type) {
      if (type == 'Free'){
        return 'data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%3E%3Cg%20transform%3D%22matrix(2.2857143%2C0%2C0%2C2.2857143%2C-914.28571%2C-191.82235)%22%20style%3D%22fill%3A%230571b0%22%3E%3Ccircle%20cx%3D%22512.00623%22%20cy%3D%22238.54443%22%20r%3D%2220.087946%22%2F%3E%3Cpath%20d%3D%22m%20512.00621%2C174.1023%20c%20-24.6055%2C0%20-46.78259%2C14.60617%20-56.51409%2C37.19394%20-2.3927%2C5.55321%200.17856%2C11.9992%205.73176%2C14.3919%205.5532%2C2.3927%2011.9992%2C-0.1607%2014.3919%2C-5.73176%206.26744%2C-14.5526%2020.5522%2C-23.96269%2036.40829%2C-23.96269%2015.85608%2C0%2030.12299%2C9.41009%2036.40828%2C23.96269%201.7856%2C4.14258%205.82104%2C6.62456%2010.07076%2C6.62456%201.44633%2C0%202.91052%2C-0.2857%204.32114%2C-0.8928%205.5532%2C-2.3927%208.12446%2C-8.83869%205.73176%2C-14.3919%20-9.76721%2C-22.58777%20-31.9443%2C-37.19394%20-56.5498%2C-37.19394%20z%22%2F%3E%3Cpath%20d%3D%22m%20597.71478%2C179.54836%20c%20-19.03445%2C-29.01592%20-51.06802%2C-46.33619%20-85.70857%2C-46.33619%20-34.64055%2C0%20-66.67412%2C17.32027%20-85.70857%2C46.33619%20-3.32121%2C5.05324%20-1.91059%2C11.85635%203.1605%2C15.15971%201.85702%2C1.2142%203.92831%2C1.78559%205.9996%2C1.78559%203.57119%2C0%207.07096%2C-1.74988%209.17796%2C-4.9461%2014.94543%2C-22.80205%2040.14018%2C-36.42614%2067.37051%2C-36.42614%2027.23033%2C0%2052.42508%2C13.62409%2067.38836%2C36.444%203.32121%2C5.05323%2010.10647%2C6.48171%2015.15971%2C3.1605%205.05323%2C-3.32121%206.46385%2C-10.10647%203.1605%2C-15.17756%20z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E'
      } else if (type == 'Limited Free') {
        return 'data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%3E%3Cg%20transform%3D%22matrix(2.2857143%2C0%2C0%2C2.2857143%2C-914.28571%2C-191.82235)%22%20style%3D%22fill%3A%23008837%22%3E%3Ccircle%20cx%3D%22512.00623%22%20cy%3D%22238.54443%22%20r%3D%2220.087946%22%2F%3E%3Cpath%20d%3D%22m%20512.00621%2C174.1023%20c%20-24.6055%2C0%20-46.78259%2C14.60617%20-56.51409%2C37.19394%20-2.3927%2C5.55321%200.17856%2C11.9992%205.73176%2C14.3919%205.5532%2C2.3927%2011.9992%2C-0.1607%2014.3919%2C-5.73176%206.26744%2C-14.5526%2020.5522%2C-23.96269%2036.40829%2C-23.96269%2015.85608%2C0%2030.12299%2C9.41009%2036.40828%2C23.96269%201.7856%2C4.14258%205.82104%2C6.62456%2010.07076%2C6.62456%201.44633%2C0%202.91052%2C-0.2857%204.32114%2C-0.8928%205.5532%2C-2.3927%208.12446%2C-8.83869%205.73176%2C-14.3919%20-9.76721%2C-22.58777%20-31.9443%2C-37.19394%20-56.5498%2C-37.19394%20z%22%2F%3E%3Cpath%20d%3D%22m%20597.71478%2C179.54836%20c%20-19.03445%2C-29.01592%20-51.06802%2C-46.33619%20-85.70857%2C-46.33619%20-34.64055%2C0%20-66.67412%2C17.32027%20-85.70857%2C46.33619%20-3.32121%2C5.05324%20-1.91059%2C11.85635%203.1605%2C15.15971%201.85702%2C1.2142%203.92831%2C1.78559%205.9996%2C1.78559%203.57119%2C0%207.07096%2C-1.74988%209.17796%2C-4.9461%2014.94543%2C-22.80205%2040.14018%2C-36.42614%2067.37051%2C-36.42614%2027.23033%2C0%2052.42508%2C13.62409%2067.38836%2C36.444%203.32121%2C5.05323%2010.10647%2C6.48171%2015.15971%2C3.1605%205.05323%2C-3.32121%206.46385%2C-10.10647%203.1605%2C-15.17756%20z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E'
      } else {
        return 'data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%3E%3Cg%20transform%3D%22matrix(2.2857143%2C0%2C0%2C2.2857143%2C-914.28571%2C-191.82235)%22%20style%3D%22fill%3A%23ca0020%22%3E%3Ccircle%20cx%3D%22512.00623%22%20cy%3D%22238.54443%22%20r%3D%2220.087946%22%2F%3E%3Cpath%20d%3D%22m%20512.00621%2C174.1023%20c%20-24.6055%2C0%20-46.78259%2C14.60617%20-56.51409%2C37.19394%20-2.3927%2C5.55321%200.17856%2C11.9992%205.73176%2C14.3919%205.5532%2C2.3927%2011.9992%2C-0.1607%2014.3919%2C-5.73176%206.26744%2C-14.5526%2020.5522%2C-23.96269%2036.40829%2C-23.96269%2015.85608%2C0%2030.12299%2C9.41009%2036.40828%2C23.96269%201.7856%2C4.14258%205.82104%2C6.62456%2010.07076%2C6.62456%201.44633%2C0%202.91052%2C-0.2857%204.32114%2C-0.8928%205.5532%2C-2.3927%208.12446%2C-8.83869%205.73176%2C-14.3919%20-9.76721%2C-22.58777%20-31.9443%2C-37.19394%20-56.5498%2C-37.19394%20z%22%2F%3E%3Cpath%20d%3D%22m%20597.71478%2C179.54836%20c%20-19.03445%2C-29.01592%20-51.06802%2C-46.33619%20-85.70857%2C-46.33619%20-34.64055%2C0%20-66.67412%2C17.32027%20-85.70857%2C46.33619%20-3.32121%2C5.05324%20-1.91059%2C11.85635%203.1605%2C15.15971%201.85702%2C1.2142%203.92831%2C1.78559%205.9996%2C1.78559%203.57119%2C0%207.07096%2C-1.74988%209.17796%2C-4.9461%2014.94543%2C-22.80205%2040.14018%2C-36.42614%2067.37051%2C-36.42614%2027.23033%2C0%2052.42508%2C13.62409%2067.38836%2C36.444%203.32121%2C5.05323%2010.10647%2C6.48171%2015.15971%2C3.1605%205.05323%2C-3.32121%206.46385%2C-10.10647%203.1605%2C-15.17756%20z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E'
      }
    }

    new nyc.ol.FinderApp({
      title: 'Wifi Finder',
      splashContent: 'Use this application to locate public wifi in New York City.',
      geoclientUrl: 'https://maps.nyc.gov/geoclient/v1/search.json?app_key=74DF5DB1D7320A9A2&app_id=nyc-lib-example',
      facilityTabTitle: 'Wifi Hotspots',
      facilityUrl: 'https://data.cityofnewyork.us/api/views/varh-9tsp/rows.csv?accessType=DOWNLOAD',
      facilityFormat: new nyc.ol.format.CsvPoint({
        x: 'X',
        y: 'Y',
        defaultDataProjection: 'EPSG:2263'
      }),
      facilityStyle: function(feature, resolution) {
        return new ol.style.Style({
          image: new ol.style.Icon({
            src: getIcon(feature.get('TYPE')),
            scale: 1 / 32
          })
        });
      },
      filterChoiceOptions: [
        {
          title: 'Wifi Type',
          choices: [
            {name: 'TYPE', values: ['Free'], label: 'Free', checked: true},
            {name: 'TYPE', values: ['Limited Free'], label: 'Limited Free', checked: true},
            {name: 'TYPE', values: ['Partner Site'], label: 'Partner Site', checked: true},
          ]
        },
        {
          title: 'Location Type',
          radio: true,
          choices: [
            {name: 'LOCATION_T', values: ['Outdoor', 'Outdoor TWC Aerial', 'Outdoor Kiosk'], label: 'Outdoor'},
            {name: 'LOCATION_T', values: ['Library'], label: 'Library '},
            {name: 'LOCATION_T', values: ['Subway Station'], label: 'Subway Station'},
            {name: 'LOCATION_T', values: ['Indoor', 'Indoor AP - Community Center - Gym','Indoor AP - Community Center - Cafeteria','Indoor AP - Community Center - Activity Rm 1', 'Indoor AP - Community Center - Activity Rm 2'  ], label: 'Indoor'}
          ]
        }
      ],
      decorations: [{
        getName: function() {
          return this.get('SSID')
        },
        getAddress1: function() {
          return this.get('LOCATION')
        },
        getBorough() {
          return {
            MN: 'Manhattan',
            BX: 'Bronx',
            QU: 'Queens',
            BK: 'Brooklyn',
            SI: 'Staten Island'
          }[this.get('BORO')]
        },
        getCityStateZip: function() {
          return `${this.getBorough()}, NY ${this.get('POSTCODE')}`
        },
        getPhone: function() {
          return this.get('PHONE')
        },
        getEmail: function() {
          return this.get('EMAIL')
        },
        getWebsite: function() {
          return this.get('WEBSITE')
        },
        cssClass: function() {
          return this.get('TYPE')
        }
      }]
    });
